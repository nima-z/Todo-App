(this["webpackJsonptodo-list"]=this["webpackJsonptodo-list"]||[]).push([[0],{111:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){"use strict";a.r(t);var n=a(44),r=a.n(n),s=a(40),c=a(27),i=(a(111),a(0)),l=a.n(i),o=a(6),u=a(52),d=a(8),j=a(72),b=a(22),p=a.n(b),O=a(34),v=a(65),m=a(7),f=a(71),g=a(56),h="REQUIRE",x="MINLENGTH",y="MAXLENGTH",S="EMAIL",I=function(){return{type:h}},k=function(e){return{type:x,val:e}},N=function(){return{type:S}},E=function(e,t){var a,n=!0,r=Object(g.a)(t);try{for(r.s();!(a=r.n()).done;){var s=a.value;s.type===h&&(n=n&&e.trim().length>0),s.type===x&&(n=n&&e.trim().length>=s.val),s.type===y&&(n=n&&e.trim().length<=s.val),s.type===S&&(n=n&&/^\S+@\S+\.\S+$/.test(e))}}catch(c){r.e(c)}finally{r.f()}return n},L=a(46),C=a.n(L),w=a(4);function T(e,t){switch(t.type){case"CHANGE":return Object(m.a)(Object(m.a)({},e),{},{value:t.val,isValid:E(t.val,t.validators)});case"TOUCHED":return Object(m.a)(Object(m.a)({},e),{},{touched:!0});default:return e}}var _=function(e){var t=Object(i.useState)(!1),a=Object(d.a)(t,2),n=a[0],r=a[1],s=Object(i.useReducer)(T,{value:e.value||"",isValid:e.isValid||!1,touched:!1}),c=Object(d.a)(s,2),l=c[0],o=c[1],u=e.id,j=e.type,b=e.placeHolder,p=e.validators,O=e.errorText,m=e.onInput,g=l.value,h=l.isValid;function x(e){o({type:"CHANGE",val:e.target.value,validators:p})}function y(){o({type:"TOUCHED"})}return Object(i.useEffect)((function(){m(u,g,h)}),[m,u,g,h]),"Password"===u?Object(w.jsxs)("div",{className:"".concat(C.a.formControl," ").concat(!l.isValid&&l.touched&&C.a.invalid),children:[Object(w.jsxs)(f.b,{size:"md",children:[Object(w.jsx)(f.a,{type:n?"text":"password",id:u,placeholder:b,onChange:x,onBlur:y,value:l.value,pr:"4.5rem",isInvalid:!l.isValid&&l.touched,variant:"filled",required:!0}),Object(w.jsx)(f.c,{width:"3rem",mr:"0.3rem",children:Object(w.jsx)(v.a,{h:"24px",size:"sm",onClick:function(){r(!n)},fontSize:"11px",bg:"#CBD5E0",color:"white",children:n?"Hide":"Show"})})]}),!l.isValid&&l.touched&&Object(w.jsx)("p",{children:O})]}):Object(w.jsxs)("div",{className:"".concat(C.a.formControl," ").concat(!l.isValid&&l.touched&&C.a.invalid),children:[Object(w.jsx)(f.a,{type:j,id:u,placeholder:b,onChange:x,onBlur:y,value:l.value,isInvalid:!l.isValid&&l.touched,variant:"filled",required:!0}),!l.isValid&&l.touched&&Object(w.jsx)("p",{children:O})]})},V=a.p+"static/media/signup.0370f7ea.svg",A=a(55);function P(e,t){if("INPUT_CHANGE"===t.type){var a=!0;for(var n in e.inputs)a=n===t.inputId?a&&t.isValid:a&&e.inputs[n].isValid;return Object(m.a)(Object(m.a)({},e),{},{inputs:Object(m.a)(Object(m.a)({},e.inputs),{},Object(A.a)({},t.inputId,{value:t.value,isValid:t.isValid})),isValid:a})}return e}function H(e,t){var a=Object(i.useReducer)(P,{inputs:e,isValid:t}),n=Object(d.a)(a,2),r=n[0],s=n[1];return[r,Object(i.useCallback)((function(e,t,a){s({type:"INPUT_CHANGE",value:t,isValid:a,inputId:e})}),[])]}var F=a(49),G=a(28),J=a(53),R=a(59),U=a.n(R);var D=function(e){var t=Object(o.g)(),a=Object(i.useContext)(G.a),n=H({Name:{value:"",isValid:!1},Email:{value:"",isValid:!1},Password:{value:"",isValid:!1}},!1),r=Object(d.a)(n,2),s=r[0],c=r[1],l=Object(F.a)(),u=l.isLoading,b=l.error,m=l.clearError,f=l.sendRequest;function g(){return(g=Object(O.a)(p.a.mark((function e(n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,f("https://todo-and-task-manager.herokuapp.com/api/users/signup","POST",JSON.stringify({name:s.inputs.Name.value,email:s.inputs.Email.value,password:s.inputs.Password.value}));case 4:r=e.sent,a.setId(r.user._id.toString()),a.setName(r.user.name),a.setTasks(0),a.login(),t("/".concat(a.userState.userId)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}return Object(w.jsxs)(i.Fragment,{children:[b?Object(w.jsx)(J.a,{message:b,clearError:m}):null,Object(w.jsx)("div",{className:U.a.svg,children:Object(w.jsx)("img",{src:V,alt:""})}),Object(w.jsxs)("form",{className:U.a.form,onSubmit:function(e){return g.apply(this,arguments)},children:[Object(w.jsxs)(j.b,{direction:"column",align:"flex-start",children:[Object(w.jsx)(_,{type:"text",id:"Name",placeHolder:"Name",validators:[I()],errorText:"Please enter a valid name",onInput:c}),Object(w.jsx)(_,{type:"email",id:"Email",placeHolder:"Email",validators:[I(),N()],errorText:"Please enter a valid email",onInput:c}),Object(w.jsx)(_,{type:"password",id:"Password",placeHolder:"Password",validators:[k(6)],errorText:"Password should be at least 5 characters",onInput:c})]}),Object(w.jsx)(v.a,{type:"submit",disabled:!s.isValid,isLoading:u,loadingText:"Submitting",colorScheme:"green",children:"Sign Up \u2192"}),Object(w.jsx)("div",{className:U.a.footer,children:Object(w.jsxs)("p",{children:["Already have an account?",Object(w.jsx)("button",{type:"button",onClick:e.onLogin,children:"Login"}),"."]})})]})]})},q=a.p+"static/media/login.88e67fad.svg",z=a(60),B=a.n(z);var M=function(e){var t=Object(i.useContext)(G.a),a=Object(o.g)(),n=H({Email:{value:"",isValid:!1},Password:{value:"",isValid:!1}},!1),r=Object(d.a)(n,2),s=r[0],c=r[1],l=Object(F.a)(),u=l.isLoading,b=l.error,m=l.clearError,f=l.sendRequest;function g(){return(g=Object(O.a)(p.a.mark((function e(n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,f("https://todo-and-task-manager.herokuapp.com/api/users/login","POST",JSON.stringify({email:s.inputs.Email.value,password:s.inputs.Password.value}));case 4:r=e.sent,t.login(),t.setId(r.user._id.toString()),t.setName(r.user.name),t.setTasks(r.user.tasks.length),t.setAvatar(r.user.avatar),a("/".concat(t.userState.userId)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}return Object(w.jsxs)(i.Fragment,{children:[b?Object(w.jsx)(J.a,{message:b,clearError:m}):null,Object(w.jsx)("div",{className:B.a.svg,children:Object(w.jsx)("img",{src:q,alt:""})}),Object(w.jsxs)("form",{className:B.a.form,onSubmit:function(e){return g.apply(this,arguments)},children:[Object(w.jsxs)(j.b,{direction:"column",align:"flex-start",children:[Object(w.jsx)(_,{type:"email",id:"Email",placeHolder:"Email",validators:[I(),N()],errorText:"Please enter a valid email",onInput:c}),Object(w.jsx)(_,{type:"password",id:"Password",placeHolder:"Password",validators:[k(6)],errorText:"Password should be at least 5 characters",onInput:c})]}),Object(w.jsx)(v.a,{type:"submit",disabled:!s.isValid,isLoading:u,loadingText:"Logging in",colorScheme:"green",children:"Login \u2192"}),Object(w.jsx)("div",{className:B.a.footer,children:Object(w.jsxs)("p",{children:["Not a member?",Object(w.jsx)("button",{onClick:e.onSignup,children:"Sign up"}),"."]})})]})]})};var K=function(){var e=Object(i.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1];function r(){n((function(e){return!e}))}return Object(w.jsx)(i.Fragment,{children:Object(w.jsx)(j.a,{maxW:"sm",centerContent:!0,padding:"0",textAlign:"center",children:a?Object(w.jsx)(M,{onSignup:r}):Object(w.jsx)(D,{onLogin:r})})})},Q=(a(123),l.a.lazy((function(){return Promise.all([a.e(4),a.e(3)]).then(a.bind(null,141))})));var W=function(){var e;return e=Object(i.useContext)(G.a).userState.isLoggedin?Object(w.jsxs)(o.d,{children:[Object(w.jsx)(o.b,{path:"/:uid/",element:Object(w.jsx)(Q,{})}),Object(w.jsx)(o.b,{path:"*",element:Object(w.jsx)(o.a,{replace:!0,to:"/:uid"})})]}):Object(w.jsxs)(o.d,{children:[Object(w.jsx)(o.b,{path:"/auth",element:Object(w.jsx)(K,{})}),Object(w.jsx)(o.b,{path:"*",element:Object(w.jsx)(o.a,{replace:!0,to:"/auth"})})]}),Object(w.jsx)(i.Suspense,{fallback:Object(w.jsx)("div",{className:"center",children:Object(w.jsx)(u.a,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl"})}),children:e})};r.a.render(Object(w.jsx)(c.a,{children:Object(w.jsx)(s.a,{children:Object(w.jsx)(G.b,{children:Object(w.jsx)(W,{})})})}),document.getElementById("root"))},28:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return d}));var n=a(8),r=a(74),s=a(7),c=a(0),i=a(4),l=Object(c.createContext)({isLoggedin:!1,userId:null,userName:null,tasks:0,list:[],avatar:"",login:function(){},logout:function(){},setId:function(){},setTasks:function(){},setList:function(){},setAvatar:function(){}});function o(){var e=localStorage.getItem("auth");if(e){var t=JSON.parse(e);return t&&t.isLoggedin?t:{userId:null,userName:null,isLoggedin:!1,tasks:0}}return{userId:null,userName:null,isLoggedin:!1,tasks:0}}var u=function(e,t){switch(t.type){case"NAME":return Object(s.a)(Object(s.a)({},e),{},{userName:t.val});case"ID":return Object(s.a)(Object(s.a)({},e),{},{userId:t.val});case"LOGIN":return Object(s.a)(Object(s.a)({},e),{},{isLoggedin:!0});case"LOGOUT":return Object(s.a)(Object(s.a)({},e),{},{isLoggedin:!1});case"TASK":return Object(s.a)(Object(s.a)({},e),{},{tasks:e.tasks+t.val});case"LIST":return t.val.length>0||0===t.val.length?Object(s.a)(Object(s.a)({},e),{},{list:t.val}):Object(s.a)(Object(s.a)({},e),{},{list:[].concat(Object(r.a)(e.list),[t.val])});case"AVATAR":return Object(s.a)(Object(s.a)({},e),{},{avatar:t.val});default:return e}};function d(e){var t=Object(c.useReducer)(u,{userId:o().userId,userName:o().userName,isLoggedin:o().isLoggedin,tasks:o().tasks,list:[],avatar:""}),a=Object(n.a)(t,2),r=a[0],s=a[1],d=Object(c.useCallback)((function(){s({type:"LOGIN"})}),[]),j=Object(c.useCallback)((function(){s({type:"LOGOUT"})}),[]),b=Object(c.useCallback)((function(e){s({type:"ID",val:e})}),[]),p=Object(c.useCallback)((function(e){s({type:"NAME",val:e})}),[]),O=Object(c.useCallback)((function(e){s({type:"TASK",val:e})}),[]),v=Object(c.useCallback)((function(e){s({type:"LIST",val:e})}),[]),m=r.isLoggedin;return Object(c.useEffect)((function(){m?localStorage.setItem("auth",JSON.stringify(r)):localStorage.removeItem("auth")}),[m,r]),Object(i.jsx)(l.Provider,{value:{login:d,logout:j,setId:b,setName:p,setTasks:O,setList:v,setAvatar:function(e){s({type:"AVATAR",val:e})},userState:r},children:e.children})}},46:function(e,t,a){e.exports={formControl:"Input_formControl__1rF8p",invalid:"Input_invalid__2u9yB"}},49:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(22),r=a.n(n),s=a(34),c=a(8),i=a(0);function l(){var e=Object(i.useState)(!1),t=Object(c.a)(e,2),a=t[0],n=t[1],l=Object(i.useState)(),o=Object(c.a)(l,2),u=o[0],d=o[1],j=Object(i.useCallback)(function(){var e=Object(s.a)(r.a.mark((function e(t){var a,s,c,i,l=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:"GET",s=l.length>2&&void 0!==l[2]?l[2]:null,n(!0),e.prev=3,e.next=6,fetch(t,{method:a,body:s,headers:{"Content-Type":"application/json"}});case 6:return c=e.sent,e.next=9,c.json();case 9:if(i=e.sent,c.ok){e.next=12;break}throw new Error(i.message);case 12:return n(!1),e.abrupt("return",i);case 16:throw e.prev=16,e.t0=e.catch(3),n(!1),d(e.t0.message),e.t0;case 21:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}(),[]);return{isLoading:a,error:u,clearError:function(){d(null)},sendRequest:j}}},53:function(e,t,a){"use strict";var n=a(32),r=a(65),s=a(4);t.a=function(e){return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)(n.a,{isOpen:!0,isCentered:!0,children:[Object(s.jsx)(n.g,{}),Object(s.jsxs)(n.d,{maxWidth:"350px",children:[Object(s.jsx)(n.f,{children:"Error"}),Object(s.jsx)(n.b,{children:e.message}),Object(s.jsx)(n.e,{children:Object(s.jsx)(r.a,{onClick:e.clearError,children:"Close"})})]})]})})}},59:function(e,t,a){e.exports={svg:"SignupForm_svg__3JPgJ",form:"SignupForm_form__H9GKT",footer:"SignupForm_footer__3J97k",emailExist:"SignupForm_emailExist__3a-uI"}},60:function(e,t,a){e.exports={svg:"LoginForm_svg__JHQbm",form:"LoginForm_form__3jmxq",footer:"LoginForm_footer__3fL2l"}}},[[124,1,2]]]);
//# sourceMappingURL=main.6e660749.chunk.js.map